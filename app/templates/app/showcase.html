{% extends "app/base.html" %}

{% block title %}Starting Out Page{% endblock %}

{% block content %}
<style>
    .home {
        width: 100%;
        height: 15vh;
        background-position: center top;
        background-size: cover;
        background-attachment: fixed; /* This ensures the background is fixed */
    }
    .box {
        width: 200px;
        height: 200px;
        background-color: lightgray;
        margin: 20px;
        display: inline-block;
        transition: background-color 0.3s;
    }
</style>

<div class="home">
    <div>
        <h3 style="
        ttext-align: left;
        font-family: 'Roboto', serif;
        font-size: 2.5rem;
        color: black;
        text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        padding: 20px;
        font-size: 2rem;
        margin-top: 0vh;">
        This page served as an initial test to validate the functionality of Cross-Site Request Forgery (CSRF) protection mechanisms and JavaScript integration. It features a straightforward implementation of a JavaScript and Python combination to create a random selection function that dynamically changes the color of a designated element.
        <br>
        <br>
        <p id="color-display">Color will appear here</p>
        <br>
        <button id="change-color-btn" style="padding: 10px;">Change Color</button>
        <br>
        <br>
        </h3>
    </div>
</div>
<br>
<br>
<div class="box" id="color-box2"></div>


<script>
    function rgbToColorName(rgb) {
        // Define a mapping of common RGB values to color names
        var colorNames = {
            'rgb(255, 0, 0)': 'red',
            'rgb(0, 255, 0)': 'green',
            'rgb(0, 0, 255)': 'blue',
            'rgb(211, 211, 211)': 'light gray',
            'rgb(128, 0, 128)': 'purple',
            'rgb(0, 128, 0)': 'green',
            'rgb(255, 255, 0)': 'yellow',
            'rgb(255, 165, 0)': 'orange',
            // Add more color mappings as needed
        };
    
        // Check if the rgb value exists in the mapping, otherwise return 'Unknown'
        var colorName = colorNames[rgb.toLowerCase()] || 'Pressing Button to QUICKLY';
    
        return colorName;
    }
    
    // Example usage
    var rgbColor = 'rgb(211, 211, 211)';
    var colorName = rgbToColorName(rgbColor);
    $(document).ready(function() {
        var csrfToken = '{{ csrf_token }}';

        $('#change-color-btn').click(function() {
            // Get current color before POST request
            var currentColor = $('#color-box2').css('background-color');
            
            $.ajax({
                url: '', // Add your URL endpoint here
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrfToken
                },
                data: {},
                beforeSend: function() {
                    // Show message before sending request
                    $('#color-display').text('Changing color from ' + rgbToColorName(currentColor) + '...');
                },
                success: function(data) {
                    // Update messages and UI after successful POST
                    $('#color-display').text('Changed color from ' + rgbToColorName(currentColor) + ' to ' + data.color);
                    $('#color-box2').css('background-color', data.color);
                },
                error: function(xhr, status, error) {
                    // Handle error
                    console.error(error);
                    $('#color-display').text('Error occurred while changing color');
                }
            });
        });
    });
</script>


{% endblock %}

{% block content3 %}
<h2>Do or do not. There is no try.</h2>
{% endblock %}

{% block quotes %}
<blockquote class="blockquote">
    
</blockquote>
{% endblock %}
